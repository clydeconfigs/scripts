#!/bin/bash

# The below is the original file made in 2022. Ah, the times go by...

## This file was generated by ChatGPT Dec 15 Version.
#
## Check if Bluetooth is enabled
#if not bluetoothctl show | grep -q "Powered: yes"
#    echo "Bluetooth is not enabled. Please enable Bluetooth and try again."
#    return 1
#end
#
## Get the MAC address of the headset
#set -l headset_mac (bluetoothctl devices | grep -Eo "([0-9A-Fa-f]{2}:){5}([0-9A-Fa-f]{2})" | head -1)
#
## Connect to the headset
#bluetoothctl connect $headset_mac

if ! bluetoothctl show | grep -q "Powered: yes"; then
    rofi -font 'Tamzen 15' -theme glue_pro_blue -e "Bluetooth is not enabled. Please enable Bluetooth and try again."
    exit 1
fi

headset_mac=$(bluetoothctl devices | grep -Eo "([0-9A-Fa-f]{2}:){5}([0-9A-Fa-f]{2})" | head -1)

if [ -z "$headset_mac" ]; then
    rofi -font 'Tamzen 15' -theme glue_pro_blue -e "No Bluetooth devices found. Please make sure your headset is discoverable."
    exit 1
fi

selected_headset=$(bluetoothctl devices | rofi -dmenu -font 'Tamzen 15' -theme glue_pro_blue -p "Select Bluetooth headset:" | grep -Eo "([0-9A-Fa-f]{2}:){5}([0-9A-Fa-f]{2})")

bluetoothctl connect "$selected_headset"
